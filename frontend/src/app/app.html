<!--<app-old-home></app-old-home>-->

<div class="min-h-screen w-full home-screen">
  <!-- Header -->
  <header class="flex items-center gap-8 px-6 home-header">
    <div class="flex items-center gap-3">
      <div class="rounded-lg p-2">
        <div class="logo-avatar">
          <span class="pi pi-car rounded-full text-white bg-blue-600 p-4" style="font-size: 20px;"></span>
        </div>
      </div>
      <div>
        <div class="text-xl font-bold tracking-wide">BLIP</div>
        <div class="text-[10px] tracking-widest">TRANSPORT CONTROL</div>
      </div>
    </div>

    <div class="flex items-center gap-4 ml-auto">
      <p-overlayBadge pTooltip="Notifications" tooltipPosition="bottom" value="2">
        <i class="pi pi-bell" style="font-size: 1.5rem;cursor: pointer"></i>
      </p-overlayBadge>
      <div class="flex items-center gap-3 px-4 py-2 rounded-lg cursor-pointer">
        <p-avatar icon="pi pi-user" shape="circle" size="xlarge"/>
        <div>
          <div class="text-sm font-semibold">Operator</div>
          <div class="text-xs opacity-70">Level 5 Access</div>
        </div>
      </div>
    </div>
  </header>

  <div class="flex h-[calc(100vh-80px)]">
    <!-- Sidebar -->
    <aside class="w-64 flex flex-col py-6">
      <nav class="flex-1 px-4 pb-4 space-y-1 side-panel">
        @for (item of items; track item.label) {
          <div class="mb-1">
            <!-- Sub menu -->
            @if (!item?.items) {
              <div
                class="flex items-center gap-3 px-4 py-2 rounded-lg hover:bg-purple-600/10 cursor-pointer text-sm"
                (keydown)="item.command?.({ originalEvent: $event })"
                (click)="item.command?.({ originalEvent: $event })"
              >
                <i [class]="item.icon" class="text-lg"></i>
                <span class="text-sm">{{ item.label }}</span>
              </div>
            } @else {
              <div
                class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer"
                [ngClass]="{ 'font-medium': item.items?.length,'bg-blue-100': item.items?.length ,'bg-purple-600/10': !item.items?.length }"
                (keydown)="item.command?.({ originalEvent: $event })"
                (click)="item.command?.({ originalEvent: $event })"
              >
<!--                <i [class]="item.icon" class="text-lg"></i>-->
                <span class="text-sm">{{ item.label }}</span>
              </div>
              <div class="ml-2 mt-1 space-y-1">
                @for (child of item.items; track child.label) {
                  <a
                    class="flex items-center gap-3 px-4 py-2 rounded-lg
                                   hover:bg-purple-600/10 cursor-pointer text-sm"
                    (click)="child.command?.({ originalEvent: $event, item: child })"
                  >
                    <i [class]="child.icon" class="text-base"></i>
                    <span>{{ child.label }}</span>
                  </a>
                }
              </div>
            }
          </div>
        }

        <!--        <a class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all">-->
        <!--          <i class="pi pi-box"></i>-->
        <!--          <span class="text-sm">Transmissions</span>-->
        <!--          <span class="ml-auto px-2 py-0.5 rounded-xl text-xs">247</span>-->
        <!--        </a>-->
        <!--        <a class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all">-->
        <!--          <i class="pi pi-share-alt"></i>-->
        <!--          <span class="text-sm">Fleet Network</span>-->
        <!--          <span class="ml-auto px-2 py-0.5 rounded-xl text-xs">48</span>-->
        <!--        </a>-->
        <!--        <a class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all">-->
        <!--          <i class="pi pi-map"></i>-->
        <!--          <span class="text-sm">Route Matrix</span>-->
        <!--        </a>-->
        <!--        <a class="flex items-center gap-3 px-4 py-3 rounded-lg cursor-pointer transition-all">-->
        <!--          <i class="pi pi-users"></i>-->
        <!--          <span class="text-sm">Operators</span>-->
        <!--        </a>-->
        <!--        <a class="flex items-center gap-3 px-4 py-3 rounded-lg  cursor-pointer">-->
        <!--          <i class="pi pi-chart-line"></i>-->
        <!--          <span class="text-sm">Telemetry</span>-->
        <!--        </a>-->
      </nav>
    </aside>

    <!-- Main Content -->
    <main class="flex-1 overflow-y-auto p-8 main-content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
